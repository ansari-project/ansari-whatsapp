// NOTE: This structure is personally documented.
//  However, if you want the full specifications, then I advise you do the following:
//      1. Check this official repo by Meta which contains all OpenAPI specifications for META APIs:
//          https://github.com/facebook/openapi?brid=s0zjZURH9W1FJ0r-AVVCrA
//          (Side note: I found out about this repo from here: docs\assets\where-to-get-meta-openapi-specs.png)
//      2. In that repo, navigate to "business-messaging-api_*.yaml" file.
//      3. Copy the content of that file to a new file in VSCode for easier readability
//      4. Search for "  /whatsapp/webhooks" line in that file; 
//          you'll see `examples:` of `Text Message", "Image Message", etc.
//          (The examples below are based on "Text Message" example)
//          Moreover, this line `$ref: '#/components/schemas/WebhookPayload'` says that the structure of these examples are defined in the `WebhookPayload` schema
//      5. Search for `WebhookPayload:` schema in that file to see the full structure and the meaning behind each field
{
    "object": "whatsapp_business_account",
    "entry": [
        {
            "id": "<<the WABA ID of one of our phone numbers that received this message>>",
            "changes": [
                {
                    "value": {
                        "messaging_product": "whatsapp",
                        "metadata": {
                            "display_phone_number": "<<the WHATSAPP_BUSINESS_PHONE_NUMBER without non-numeric characters (e.g., +1 (555) 555-5555 -> 15555555555)>>",
                            "phone_number_id": "<<the WHATSAPP_BUSINESS_PHONE_NUMBER_ID that is associated with one of our WABAs (this ID is a numeric value generated by Meta)>>"
                        },
                        "contacts": [
                            {
                                "profile": {
                                    "name": "<<the whatsapp sender's display name>>"
                                },
                                "wa_id": "<<the whatsapp sender's phone number without non-numeric characters>>"
                            }
                        ],
                        // Source 1: https://developers.facebook.com/docs/whatsapp/cloud-api/guides/send-messages
                        // Source 2 (more up to date): https://github.com/facebook/openapi/blob/ecba623b4aba6ae770185b074ed77ed5acef22f7/business-messaging-api_v23.0.yaml#L7531
                        "messages": [
                            {
                                "from": "<<the whatsapp sender's phone number without non-numeric characters>>",
                                "id": "wamid.<<UNIQUE_NUMERIC_ID_FOR_THIS_SPECIFIC_MSG>>",
                                "timestamp": "<<Unix timestamp of the message (e.g., 1730548169)>>",
                                "type": "<<the type of the sent message ('text'/'audio'/'video'/'image'/'sticker'/'document'/'location'/'contacts'/'unsupported')>>",
                                // The following field is only present if "type" has value "text"
                                "text": {
                                    "body": "<<the whatsapp sender's sent message>>"
                                },
                                // The following field is only present if "type" has value "audio"
                                "audio": {
                                    "mime_type": "audio/ogg",
                                    "codecs": "opus",
                                    "sha256": "<<SHA256 hash of the audio file>>",
                                    "id": "<<unique numeric ID for this specific audio file>>",
                                    "voice": "True/False (actually sent as a boolean value, so no quotes)"
                                },
                                // The following field is only present if "type" has value "image"
                                "image": {
                                    "mime_type": "image/jpeg",
                                    "sha256": "<<SHA256 hash of the image file>>",
                                    "id": "<<unique numeric ID for this specific image file>>"
                                },
                                // The following field is only present if "type" has value "sticker"
                                "sticker": {
                                    "mime_type": "image/webp",
                                    "sha256": "<<SHA256 hash of the sticker file>>",
                                    "id": "<<unique numeric ID for this specific sticker file>>",
                                    "animated": "True/False (actually sent as a boolean value, so no quotes)"
                                },
                                // The following field is only present if "type" has value "video" (when sending a video/gif)
                                "video": {
                                    "mime_type": "video/mp4",
                                    "sha256": "<<SHA256 hash of the video file>>",
                                    "id": "<<unique numeric ID for this specific video file>>"
                                },
                                // the following field is only present if "type" has value "document"
                                "document": {
                                    "filename": "<<the name of the document file>>",
                                    "mime_type": "application/pdf , application/vnd.openxmlformats-officedocument.wordprocessingml.document , etc.",
                                    "sha256": "<<SHA256 hash of the document file>>",
                                    "id": "<<unique numeric ID for this specific document file>>"
                                },
                                // the following field is only present if "type" has value "location"
                                "location": {
                                    "address": "<<address of the location>>",
                                    "latitude": "<<latitude of the location>>",
                                    "longitude": "<<longitude of the location>>",
                                    "name": "<<name of the location>>",
                                    "url": "<<URL of the location (https://foursquare.com/v/LOCATION_ID)>>"
                                },
                                // the following field is only present if "type" has value "contacts"
                                "contacts":[
                                    {
                                        "name": {
                                            "first_name": "<<first name of the contact>>",
                                            "middle_name": "<<middle name of the contact>>",
                                            "last_name": "<<last name of the contact>>",
                                            "formatted_name": "<<formatted name of the contact (entire name)>>"
                                        },
                                        "phones": [
                                            {
                                                "phone": "<<phone number of the contact (with spaces and special characters)>>",
                                                "wa_id": "<<phone number of the contact (without spaces and special characters)>>",
                                                "type": "<<type of the phone number (e.g., 'MOBILE', 'WORK', 'HOME', etc.)>>"
                                            }
                                        ],
                                    }
                                ],
                                // The following field is only present if "type" has value "unsupported"
                                // as of 2024-11-12, video notes, gifs sent from giphy (whatsapp keyboard), and polls are not supported
                                "errors": [
                                    {
                                        "code": 131051,
                                        "title": "Message type unknown",
                                        "message": "Message type unknown",
                                        "error_data": {
                                            "details": "Message type is currently not supported."
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    "field": "messages"
                }
            ]
        }
    ]
}